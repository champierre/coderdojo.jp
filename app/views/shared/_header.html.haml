%nav.navbar.navbar-default.navbar-fixed-top#header
  .container-fluid
    .navbar-header
      %button.navbar-toggle.collapsed{ "type" => "button", "data-toggle" => "collapse",
                                      "data-target" => "#header-nav-toggle", "aria-expanded" => "false" }
        %span.sr-only Toggle navigation
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar
      .navbar-header-logos
        = link_to lazy_image_tag('/img/header-logo.png',  alt: 'CoderDojo logo',  min: true), '/', id: "header-logo"
        = link_to lazy_image_tag('/img/header-brand.png', alt: 'CoderDojo brand', min: true), '/', id: "header-brand"
    #bs-example-navbar-collapse-1.collapse#header-nav-toggle.navbar-collapse
      %ul.nav.navbar-nav.navbar-right
        %li= link_to '全国の道場',     '/#dojos'
        %li= link_to 'パートナー法人', '/#partners'
        %li.navbar-dd-p
          = link_to '最近の活動',      '/#timeline'
          %span.navbar-dd-l
          %ul.navbar-dd
            %li= link_to '☯️ SNS',     '/#timeline'
            %li= link_to '📰 News',    'https://news.coderdojo.jp/'
            %li= link_to '📻 Podcast', '/podcasts'
            %li= link_to '📺 YouTube', '/youtube'
            %li= link_to '📚 その他',  '/#kata'
        %li.navbar-dd-p
          = link_to '道場を探す',      '/#dojos'
          %span.navbar-dd-l
          %ul.navbar-dd
            %li= link_to '☯️  一覧から',   '/#dojos'
            %li= link_to '📅 日付から',   '/events'
            %li= link_to '🗾 地図から',   'https://map.coderdojo.jp/'
        %li.navbar-dd-p
          = link_to '資料を探す',      '/kata'
          %span.navbar-dd-l
          %ul.navbar-dd
            %li= link_to 'はじめに',     '/kata#README'
            %li= link_to '学ぶ',         '/kata#learn'
            %li= link_to '腕試し',       '/kata#challenge'
            %li= link_to '立ち上げる',   '/kata#startup'
            %li= link_to '運営向け支援', '/kata#support'
            %li= link_to '法人向け資料', '/partnership'
            %li= link_to '統計情報',     '/stats'
            %li= link_to '資料集',       '/docs'
            %li= link_to 'お問い合わせ', '/#contact'
            %li= link_to 'English',      '/english', hreflang: 'en'

        / DocSearch: https://github.com/algolia/docsearch-configs/blob/master/configs/coderdojo.json
        %li.search-li
          %label.search-label{for: 'search'}
            %img.search-icon{alt: '検索アイコン', src: '/img/search.svg'}
            検索で探す
          = check_box_tag :search, "検索アイコン", false, class: 'search-checkbox', onclick: 'focusSearchBox()'
          %div.search
            %input#searchbox{placeholder: "例: コンテスト、教材", type: "text"}
            #hits
            #pagination


:javascript
  function focusSearchBox() {
    document.getElementById("searchbox").focus();
  };

  document.addEventListener('click', (e) => {
    if(e.target.closest('#header-nav-toggle') || !e.target.closest('#header-nav-toggle')) {
      const element = document.getElementById('header-nav-toggle')
      element.classList.remove('in');
    }
  })
